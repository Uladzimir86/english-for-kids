(this["webpackJsonpenglish-for-kids"]=this["webpackJsonpenglish-for-kids"]||[]).push([[0],{20:function(t,e,a){},27:function(t,e,a){},28:function(t,e,a){},29:function(t,e,a){},30:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){"use strict";a.r(e);var s,r,n,i=a(1),c=a.n(i),d=a(21),o=a.n(d),l=(a(27),a(3)),u=a(9),h=a(10),j=a(12),m=a(11),b=a(8),g=a(2),p=(a(28),a(29),a(30),a(0)),_=function(t){var e=t.index,a=void 0===e?"0":e,s=t.cardsArray,r=void 0===s?[]:s,n=["Main Page"].concat(Object(l.a)(r)).map((function(t,e){var s="sidebar__link";return e.toString()===a&&(s="sidebar__link sidebar__link_onClick"),Object(p.jsx)("li",{className:"sidebar__item",children:Object(p.jsx)(b.b,{to:"/main/"+e,className:s,children:t})},t.toString())}));return Object(p.jsx)("ul",{className:"sidebar__list",children:n})},O=function(t){return Object(p.jsxs)("div",{className:t.class,children:[Object(p.jsx)(_,{index:t.index,cardsArray:t.cardsArray}),Object(p.jsx)("button",{type:"button",className:"sidebar__button",onClick:t.showLogin,children:"Login"})]})},x=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).toggleSwitch=function(){s.setState((function(t){return{trainOn:!t.trainOn}})),s.props.setTrain()},s.state={sidebarHidden:!0,trainOn:!0},s}return Object(h.a)(a,[{key:"render",value:function(){var t="sidebar",e="menu-toggle";this.props.sidebar&&(t+=" sidebar_hidden",e+=" menu-toggle_set-hidden");var a="switch",s="switch__handle",r="switch__text",n="train";return this.state.trainOn!==this.props.train&&this.setState((function(t){return{trainOn:!t.trainOn}})),this.state.trainOn||(a+=" switch_game",s+=" switch__handle_game",r="switch__text_game",n="game",t+=" sidebar_game"),Object(p.jsxs)("header",{className:"header",id:"headerId",children:[Object(p.jsx)(O,{class:t,index:this.props.index,id:"sidebarId",showLogin:this.props.showLogin,cardsArray:this.props.cardsArray}),Object(p.jsx)("div",{className:e,onClick:this.props.toggleSidebar}),Object(p.jsxs)("div",{className:a,onClick:this.toggleSwitch,children:[Object(p.jsx)("div",{className:s}),Object(p.jsx)("div",{className:r,children:n})]})]})}}]),a}(c.a.Component),y=(a(20),a(37),function(){return Object(p.jsx)("div",{className:"star"})}),v=function(){return Object(p.jsx)("div",{className:"star_lose"})},f="card_train";function N(){s.classList.remove("flipped"),s.removeEventListener("mouseleave",N)}function S(t){"card__button"===t.target.className?((s=t.currentTarget.closest(".card-container")).className+=" flipped",s.addEventListener("mouseleave",N)):C(n+t.currentTarget.dataset.audio)}function C(t){var e=new Audio(t);e.currentTime=0,e.play()}var w=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).playGame=function(){var t=Object(l.a)(s.state.cards),e=Math.floor(Math.random()*t.length),a="object"===typeof t[e]?n+t[e].audioSrc:"";setTimeout((function(){return C(a)}),700),r=t[e].word,s.setState({playedSoundAddr:a,cardDelete:e})},s.checkCard=function(t){if(s.state.gamePlay)if(t.target.alt===r){var e=Object(l.a)(s.state.cards);e.splice(s.state.cardDelete,1),s.setState({cards:Object(l.a)(e)}),C("/audio/correct.mp3"),t.target.closest(".card").classList.add("card_guessed"),s.addStar(Object(p.jsx)(y,{})),setTimeout((function(){e.length>0&&s.playGame()}))}else C("/audio/error.mp3"),s.addStar(Object(p.jsx)(v,{}))},s.addStar=function(t){s.setState((function(e){return{starsList:[t].concat(Object(l.a)(e.starsList))}}))},s.getCategoryList=function(){return s.state.categoryList.map((function(t,e){var a=Object(l.a)(s.state.cardsArray[e+1]),r=n+a[0].image;return Object(p.jsx)("div",{className:"card-container",children:Object(p.jsxs)(b.b,{to:"/main/"+(e+1),className:"card "+f,children:[Object(p.jsx)("img",{src:r,alt:a[0].word,className:"card__image_back"}),t]},t.toString())},a[0].word)}))},s.getGameList=function(t,e){var a=0===Number(t)?1:Number(t);return s.state.cardsArray[a].map((function(t){var a=t,r=n+a.image;return e?Object(p.jsxs)("div",{className:"card-container",children:[Object(p.jsxs)("div",{className:"card card_eng","data-audio":a.audioSrc,onClick:S,children:[Object(p.jsx)("img",{src:r,alt:a.word,className:"card__image_front"}),a.word,Object(p.jsx)("div",{className:"card__button"})]}),Object(p.jsxs)("div",{className:"card card_ru",children:[Object(p.jsx)("img",{src:r,alt:a.word,className:"card__image_front"}),a.translation]})]},a.word):Object(p.jsx)("div",{className:"card-container",children:Object(p.jsx)("div",{className:"card","data-audio":a.audioSrc,children:Object(p.jsx)("img",{src:r,alt:a.word,className:"card__image_front",onClick:function(t){return s.checkCard(t)}})})},a.word)}))},s.state={cardDelete:0,starsList:[],playedSoundAddr:"",buttonStart:!1,gamePlay:!1,cardsArray:Object(l.a)(s.props.cardsArray),cards:Object(l.a)(s.props.cardsArray[Number(s.props.index)]),categoryList:Object(l.a)(s.props.cardsArray[0])},s}return Object(h.a)(a,[{key:"render",value:function(){var t=this;n=this.props.server;var e=this.props.index,a=this.props.train;f=a?"card_train":"card_game",a&&(r="");var s="0"===e?this.getCategoryList():this.getGameList(e,a),i=a||"0"===e?"main__button hidden":"main__button";return this.props.gameStarted&&!this.state.gamePlay&&Number(this.props.index)?(this.setState({gamePlay:!0,cards:Object(l.a)(this.props.cardsArray[Number(this.props.index)])}),setTimeout((function(){return t.playGame()}),100)):!this.props.gameStarted&&this.state.gamePlay&&this.setState({gamePlay:!1,cards:Object(l.a)(this.props.cardsArray[Number(this.props.index)]),starsList:[]}),this.state.cards.length?this.state.gamePlay?Object(p.jsxs)("div",{className:"main_wrapper",children:[Object(p.jsx)("div",{className:"star-container",children:Object(p.jsx)("div",{className:"star-container_wrapper",children:this.state.starsList})}),Object(p.jsx)("main",{className:"main",children:s}),Object(p.jsx)("button",{className:"main__button main__button_repeat",onClick:function(){return function(t){var e=document.querySelector(".main__button");null===e||void 0===e||e.classList.add("main__button_push"),setTimeout((function(){null===e||void 0===e||e.classList.remove("main__button_push")}),500),setTimeout((function(){C(t)}),600)}(t.state.playedSoundAddr)}})]}):Object(p.jsxs)("div",{className:"main_wrapper",children:[Object(p.jsx)("main",{className:"main",children:s}),Object(p.jsx)("button",{className:i,onClick:this.props.startGame})]}):8===this.state.starsList.length?(C("/audio/success.mp3"),setTimeout((function(){t.setState({cards:Object(l.a)(t.props.cardsArray[Number(t.props.index)])}),t.props.setTrain(),t.props.history.push("/")}),3e3),Object(p.jsx)("div",{className:"win-lose-image_wrapper",children:Object(p.jsx)("img",{src:"/image/success.jpg",alt:"success",className:"win-lose-image"})})):(C("/audio/failure.mp3"),setTimeout((function(){t.setState({cards:Object(l.a)(t.props.cardsArray[Number(t.props.index)])}),t.props.setTrain(),t.props.history.push("/")}),3e3),Object(p.jsxs)("div",{className:"win-lose-image_wrapper",children:[Object(p.jsx)("img",{src:"/image/failure.jpg",alt:"failure",className:"win-lose-image"}),Object(p.jsxs)("span",{className:"win-lose-image__text",children:["You have ",this.state.starsList.length-8," mistake(s)!"]})]}))}}]),a}(c.a.Component),L=Object(g.f)(w),k=(a(38),a.p+"static/media/rs_school_js.ad178c0d.svg"),A=function(){return Object(p.jsxs)("div",{className:"footer",children:[Object(p.jsxs)("a",{href:"https://github.com/uladzimir86",className:"footer__link",children:[Object(p.jsx)("svg",{height:"32",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true",children:Object(p.jsx)("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),Object(p.jsx)("span",{className:"footer__text",children:"uladzimir86"})]}),Object(p.jsx)("a",{href:"https://rs.school/js/",className:"footer__link",children:Object(p.jsx)("img",{src:k,className:"footer__logo"})})]})};a(39);var T=function(t){var e=t.log?"login__wrapper":"login__wrapper hidden";return Object(p.jsx)("div",{className:e,children:Object(p.jsxs)("div",{className:"login",children:[Object(p.jsx)("h2",{className:"login__h2",children:"Login"}),Object(p.jsx)("input",{type:"text",id:"input-login",className:"login__input",placeholder:"login (admin)"}),Object(p.jsx)("input",{type:"password",id:"input-password",className:"login__input",placeholder:"password (admin)"}),Object(p.jsxs)("div",{className:"login__footer",children:[Object(p.jsx)("button",{type:"button",id:"button-cancel",className:"login__button login__button_cancel",onClick:t.showLogin,children:"Cancel"}),Object(p.jsx)("button",{type:"button",id:"button-login",className:"login__button",onClick:t.sendLogin,children:"login"})]})]})})},P=(a(40),function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).updateCategory=function(){s.setState((function(t){return{update:!t.update}}))},s.createUpdateCategory=function(t){var e=t.target.dataset.id,a=document.getElementById("card-category__input-".concat(e));s.props.sendUpdateCategory(e,a.value),s.updateCategory()},s.state={update:!1},s}return Object(h.a)(a,[{key:"render",value:function(){var t=this.props,e=t.id,a=t.item,s=t.cards;return this.state.update?Object(p.jsxs)("div",{className:"card-category",children:[Object(p.jsx)("div",{className:"card-category__delete",onClick:this.props.deleteCategory,"data-id":e}),Object(p.jsx)("div",{className:"card-category__small-text",children:"Category Name"}),Object(p.jsx)("input",{type:"text",className:"card-category__input",placeholder:a,id:"card-category__input-"+e}),Object(p.jsxs)("div",{className:"card-category__buttons-container",children:[Object(p.jsx)("button",{className:"card-category__button card-category__button_update card-category__button_cancel","data-id":e,onClick:this.updateCategory,children:"Cancel"}),Object(p.jsx)("button",{className:"card-category__button card-category__button_update","data-id":e,onClick:this.createUpdateCategory,children:"Create"})]})]},a):Object(p.jsxs)("div",{className:"card-category",children:[Object(p.jsx)("div",{className:"card-category__delete",onClick:this.props.deleteCategory,"data-id":e}),Object(p.jsx)("h3",{className:"card-category__title",children:a}),Object(p.jsxs)("div",{className:"card-category__text",children:["WORDS: ",s.length]}),Object(p.jsxs)("div",{className:"card-category__buttons-container",children:[Object(p.jsx)("button",{className:"card-category__button","data-id":e,onClick:this.updateCategory,children:"Update"}),Object(p.jsx)("button",{className:"card-category__button","data-id":e,children:"Add word"})]})]},a)}}]),a}(c.a.Component));var G=function(t){var e=Object(l.a)(t.cards),a=e[0].map((function(a,s){return Object(p.jsx)(P,{id:s,item:a,cards:e[s+1],update:!1,deleteCategory:t.deleteCategory,sendUpdateCategory:t.sendUpdateCategory})}));return Object(p.jsxs)("div",{className:"admin",children:[Object(p.jsxs)("header",{className:"admin__header",children:[Object(p.jsxs)("nav",{className:"header__nav",children:[Object(p.jsx)(b.b,{to:"/admin/categories",className:"header__link",children:"Categories"}),Object(p.jsx)(b.b,{to:"#",className:"header__link del-underline",children:"Words"})]}),Object(p.jsx)("button",{className:"header__button",children:"Log out"})]}),Object(p.jsxs)("main",{className:"admin__main",children:[a,Object(p.jsxs)("div",{className:"card-category card-category_new",children:[Object(p.jsx)("h3",{className:"card-category__title",children:"Create new Category"}),Object(p.jsx)("div",{className:"card-category__button-add-new"})]})]})]})},E=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).sendLogin=function(){var t=document.getElementById("input-login"),e=document.getElementById("input-password"),a={l:t.value,p:e.value};fetch(s.state.server+"login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(t){t.ok?s.setState((function(t){return{adminPage:!t.adminPage}})):t.text().then((function(t){return alert(t)}))}))},s.deleteCategory=function(t){var e=t.target.dataset.id;fetch(s.state.server+"categories/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(t){return t.json()})).then((function(t){s.setState({cardsArray:Object(l.a)(t)})}))},s.sendUpdateCategory=function(t,e){var a={category:e};fetch(s.state.server+"categories/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(t){return t.json()})).then((function(t){s.setState({cardsArray:Object(l.a)(t)})}))},s.startGame=function(){var t=document.querySelector(".main__button");null===t||void 0===t||t.classList.add("main__button_push"),setTimeout((function(){null===t||void 0===t||t.classList.remove("main__button_push")}),500),setTimeout((function(){s.setState({gameStarted:!0})}),600)},s.setTrain=function(){s.setState((function(t){return{train:!s.state.train}}))},s.hideSidebar=function(t){!1===s.state.sidebarHidden&&s.state.gameStarted&&document.querySelectorAll(".sidebar__link").forEach((function(e){t.target===e&&s.setState({gameStarted:!1})}));(t.target!==document.querySelector(".sidebar")&&t.target!==document.querySelector(".sidebar__list")&&t.target!==document.querySelector(".sidebar__button")&&!1===s.state.sidebarHidden||t.target===document.querySelector(".menu-toggle"))&&s.setState({sidebarHidden:!s.state.sidebarHidden})},s.showLogin=function(){s.setState((function(t){return{log:!t.log}}))},s.state={sidebarHidden:!0,gameStarted:!1,train:!0,cardsArray:[],log:!1,adminPage:!1,server:"https://sheltered-shore-31833.herokuapp.com/"},s.getCardsArray(),s}return Object(h.a)(a,[{key:"getCardsArray",value:function(){var t=this;fetch(this.state.server+"main").then((function(t){return t.json()})).then((function(e){t.setState({cardsArray:Object(l.a)(e)})}))}},{key:"playSound",value:function(t){var e=new Audio("/"+t);e.currentTime=0,e.play()}},{key:"render",value:function(){var t=this,e=this.state.train;return e&&this.state.gameStarted&&this.setState({gameStarted:!1}),this.state.cardsArray[0]?this.state.adminPage?Object(p.jsxs)(b.a,{children:[Object(p.jsx)(g.a,{from:"/",to:"/admin/categories"}),Object(p.jsx)(g.b,{path:"/admin/categories",exact:!0,children:Object(p.jsx)(G,{cards:this.state.cardsArray,deleteCategory:this.deleteCategory,sendUpdateCategory:this.sendUpdateCategory})})]}):Object(p.jsx)(b.a,{children:Object(p.jsxs)("div",{className:"app",onClick:this.hideSidebar,children:[Object(p.jsx)(g.b,{path:"/",exact:!0,children:Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{index:"0",train:e,toggleSidebar:this.hideSidebar,sidebar:this.state.sidebarHidden,setTrain:this.setTrain,showLogin:this.showLogin,cardsArray:this.state.cardsArray[0]}),Object(p.jsx)(L,{train:e,index:"0",startGame:this.startGame,gameStarted:this.state.gameStarted,setTrain:this.setTrain,cardsArray:this.state.cardsArray,server:this.state.server}),Object(p.jsx)(T,{showLogin:this.showLogin,log:this.state.log,sendLogin:this.sendLogin}),Object(p.jsx)(A,{})]})}),Object(p.jsx)(g.b,{path:"/main/:id",render:function(a){var s=a.match.params.id;return Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{index:s,train:e,toggleSidebar:t.hideSidebar,sidebar:t.state.sidebarHidden,setTrain:t.setTrain,showLogin:t.showLogin,cardsArray:t.state.cardsArray[0]}),Object(p.jsx)(L,{index:s,train:e,startGame:t.startGame,gameStarted:t.state.gameStarted,setTrain:t.setTrain,cardsArray:t.state.cardsArray,server:t.state.server}),Object(p.jsx)(T,{showLogin:t.showLogin,log:t.state.log,sendLogin:t.sendLogin}),Object(p.jsx)(A,{})]})}})]})}):Object(p.jsx)("div",{children:Object(p.jsx)("span",{children:"Connection..."})})}}]),a}(c.a.Component);o.a.render(Object(p.jsx)(E,{train:!0}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.35ad4d45.chunk.js.map